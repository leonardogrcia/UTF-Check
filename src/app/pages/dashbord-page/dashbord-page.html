<div class="flex h-screen w-full bg-gray-100">
  <app-sidebar class="w-64 bg-white shadow-md hidden sm:block"
    (sidebarClick)="openModalFromSidebar($event)">
  </app-sidebar>

  <main class="flex-1 p-4 sm:p-6 overflow-y-auto">
    <div class="w-full">
      <div class="w-full bg-gray-100 py-2 px-4 rounded-md">
        <div class="flex items-center justify-between gap-2 text-sm text-gray-500">
          <div class="flex items-center gap-2">
            <i class="fa-solid fa-house text-gray-500"></i>
            <span>Dashbord</span>
          </div>
          <button
            class="text-xs px-3 py-1 rounded-md border border-gray-300 hover:bg-gray-200 transition"
            (click)="logout()">
            Deslogar
          </button>
        </div>
      </div>

      <div class="w-full mt-3">
        <div class="bg-white shadow-sm rounded-lg border border-gray-200 p-4 flex items-center justify-between gap-4">
          <div class="flex items-center gap-2 text-gray-700 font-semibold">
            <i class="fa-solid fa-chart-bar text-gray-600"></i>
            <span>Area de Checklist</span>
          </div>
          <button
            class="px-4 py-2 rounded-md text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 transition"
            [disabled]="syncing"
            (click)="syncCardsWithTrello()">
            {{ syncing ? 'Sincronizando...' : 'Sincronizar com Trello' }}
          </button>
        </div>
      </div>
    </div>

    <div class="w-full flex justify-center mt-6 md:mt-12">
      <div
        class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 2xl:grid-cols-5 gap-6 w-full max-w-7xl text-white px-4">

        @for (card of cards; track card) {
          <app-card-main
            [title]="card.title"
            [icon]="card.icon"
            [status]="card.status"
            (clicked)="openModal(card)">
          </app-card-main>
        }

      </div>
    </div>

    @if (showModal) {
      <app-modal
        [modalTitle]="modalTitle || 'Detalhes'"
        [items]="checklistOptions"
        [loading]="loadingChecklist"
        [uploading]="uploading"
        [attachments]="currentAttachments"
        (closeModal)="closeModal()"
        (progressChange)="onProgressChange($event)"
        (fileSelected)="onFileSelected($event)">
      </app-modal>
    }
  </main>
</div>
